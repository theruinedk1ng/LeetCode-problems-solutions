1488. Avoid Flood in The City

```js
/**
 * @param {number[]} rains
 * @return {number[]}
 */
var avoidFlood = function(rains) {
    const n = rains.length;
    const ans = new Array(n).fill(1);
    const lastRain = new Map();
    const sunnyDays = [];

    function binarySearch(day){
        let l = 0, r = sunnyDays.length - 1;

        while(l <= r){
            const mid = Math.floor((l + r) / 2);
            if(sunnyDays[mid] <= day)  l = mid + 1;
            else r = mid - 1;
        }

        return l < sunnyDays.length ? l : -1;
    }

    for(let i = 0; i < n; i ++){
        const lake = rains[i];

        if(lake === 0){
            sunnyDays.push(i);
            continue;
        }

        ans[i] = -1;

        if(lastRain.has(lake)){
            const prevDay = lastRain.get(lake);

            const idx = binarySearch(prevDay);

            if(idx === -1) return [];

            const dryDay = sunnyDays[idx];
            ans[dryDay] = lake;
            sunnyDays.splice(idx, 1);
        }

        lastRain.set(lake, i);
    }

    return ans;

};
```
